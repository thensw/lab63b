# การทดลองที่ 4 เรื่อง การเขียนโปรแกรมอินพุทสัญญาณดิจิทัล
## วัตถุประสงค์

## อุปกรณ์ที่ใช้
1. ไมโครคอนโทรลเลอร์ (ESP01)
2. สายUSB(ไฟเลี้ยง)
3. programmer / usb to serial
4. adapter
5. หลอดไฟLEDเปล่งแสง
6. sensorแสง
## ศึกษาข้อมูลเบื้องต้น
คลิปตัวอย่างการทดลอง https://www.youtube.com/watch?v=nFqoZT26U5k
## วิธีการทำการทดลอง
1. ทำการต่อไฟเลี้ยงเข้าที่ตัวprogrammer และต่อไมโครคอนโทรลเลอร์ผ่านตัวadapterเข้าไปยังprogrammer (ดังภาพ)

![33](https://user-images.githubusercontent.com/80879818/112346747-d51a9800-8cf8-11eb-824c-b69084d3c0ad.jpg)

2. เปิดโปรแกรมตัวอย่าง (ในที่นี้เลือกโปรแกรมที่4)
* พิมพ์ cd pattani (ชื่อโฟลเดอร์ที่จะเปิด)
* พิมพ์ cd 04_Input-port
* พิมพ์ vi src/main.cpp (เพื่อแสดงเนื้อหาโปรแกรม)
```javascript
#include <Arduino.h>
#include <ESP8266WiFi.h>

int cnt = 0;

void setup()
{
 Serial.begin(115200);
 pinMode(0, INPUT);
 pinMode(2, OUTPUT);
 Serial.println("\n\n\n");
}

void loop()
{
 int val = digitalRead(0);
 Serial.printf("======= read %d\n", val);
 if(val==1) {
  digitalWrite(2, LOW);
 } else {
  digitalWrite(2, HIGH);
 }
 delay(100);
}
```
> จากโค้ดเบื้องต้น แบ่งข้อมูลเป็น2ส่วน ดังนี้
> * set up
>   * เซตให้พอร์ท0(สายสีขาว) คือ INPUT
>   * เซตให้พอร์ท2(สายสีเหลือง) คือ OUTPUT
> * loop
>   * บรรทัดที่16 'int val = digitalRead(0)' เป็นการอ่านข้อมูลINPUTจากพอร์ท0 ซึ่งเป็นข้อมูลดิจิตอล(0,1)
>   * ถ้าINPUT=1 , ไฟจะดับ
>   * ถ้าINPUT=0 , ไฟจะติด
>   * delay(100) เป็นคำสั่งให้วนลูปทุกๆ 100 ms
3. อัปโหลดโปรแกรมเข้าสู่ไมโครคอนโทรลเลอร์
* พิมพ์ pio run -t upload
  * ในขณะที่โปรแกรมกำลังอัปโหลด `กดปุ่มสีดำบนตัวprogrammer` เพื่อให้ตัวไมโครคอนโทรลเลอร์รับโปรแกรมใหม่เข้าไป
  * จากนั้น `กดปุ่มสีแดงบนตัวprogrammer` เพื่อทำการรีเซต
  * เมื่อโปรแกรมถูกอัปโหลดเสร็จสิ้นแล้ว จะทำการตรวจสอบที่พอร์ท0ทันทีเลยว่ามีINPUTเข้ามาหรือไม่
4. แสดงผลลัพธ์จากโปรแกรมผ่านคอมพิวเตอร์
* พิมพ์ pio device monitor
> โปรแกรมอ่านค่าINPUTได้เท่ากับ1ตลอดเวลา (ดังภาพ)

![11](https://user-images.githubusercontent.com/80879818/112358027-870a9200-8d02-11eb-8f98-9ec0bc5e899d.jpg)

* เมื่อนำพอร์ท0(สายสีขาว)ไป`จิ้มที่สายสีดำ(สายดิน)` เป็นการรับค่าINPUT=0 จะแสดงผล ดังภาพ
> และเมื่อนำสายสีขาวออก ไฟก็จะดับเหมือนเดิม เนื่องจากINPUTไม่ได้รับค่า0เข้ามา

![1](https://user-images.githubusercontent.com/80879818/112358789-3ba4b380-8d03-11eb-9bb2-079116a86bbe.jpg)

* เมื่อนำพอร์ท0(สายสีขาว)ไป`จิ้มที่สายสีแดง(ไฟเลี้ยง)` เป็นการรับค่าINPUT=1 จะแสดงผล ดังภาพ

![2](https://user-images.githubusercontent.com/80879818/112359655-119fc100-8d04-11eb-96c1-33ce1aad1ead.jpg)

* เมื่อ`กดปุ่มสีดำบนprogrammer` เป็นการรับค่าINPUT=0 จะแสดงผล ดังภาพ

![22](https://user-images.githubusercontent.com/80879818/112360235-ac000480-8d04-11eb-9050-1c732bb8b670.jpg)

5. ต่อsensorแสง(ที่ต่ออยู่กับตัวต้านทาน)เข้ากับไฟเลี้ยง,พอร์ท0,สายดิน ทั้ง3ขา ตามลำดับ

![25](https://user-images.githubusercontent.com/80879818/112362130-b15e4e80-8d06-11eb-90b1-5a68e1a94375.jpg)

6. สังเกตผลลัพธ์ที่หลอดไฟLEDเปล่งแสง เมื่อsensorแสงถูกเอานิ้วบังแสงไว้(อยู่ในที่มืด)กับไม่มีอะไรบัง(สว่าง)
## การบันทึกผลการทดลอง
* สัญญาณINPUTจากพอร์ท0จะเป็นตัวควบคุมให้ไฟติด/ดับ
ค่าINPUT | ความสว่าง
------- | -------
0 | ไฟติด
1 | ไฟดับ


## อภิปรายผลการทดลอง

## คำถามหลังการทดลอง
